<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>outloud â€“ Article</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="profile.css" />
    <style>
      body {
        background: #18191a;
        color: #f5f6fa;
        font-family: 'Satoshi', Arial, sans-serif;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }
      .article-main {
        margin-left: 260px;
        padding: 48px 0 48px 0;
        min-height: 100vh;
        background: #18191a;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .article-container {
        width: 100%;
        max-width: 600px;
        background: #23272f;
        border-radius: 18px;
        box-shadow: 0 4px 32px 0 rgba(0, 0, 0, 0.18);
        padding: 0 0 32px 0;
        margin-top: 32px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .article-image {
        width: 100%;
        max-width: 600px;
        height: 220px;
        object-fit: cover;
        border-radius: 18px 18px 0 0;
        background: #014848;
        display: block;
      }
      .article-caption {
        color: #fff;
        font-size: 1.35rem;
        font-weight: 700;
        margin: 24px 32px 8px 32px;
        text-align: left;
        width: 100%;
        font-family: 'Satoshi', Arial, sans-serif;
      }
      .article-content {
        color: #f5f6fa;
        font-size: 1.13rem;
        line-height: 1.6;
        margin: 0 32px;
        width: 100%;
        font-family: 'Satoshi', Arial, sans-serif;
        white-space: pre-line;
      }
      @media (max-width: 900px) {
        .article-main {
          margin-left: 70px;
          padding: 24px 0 24px 0;
        }
        .article-container {
          max-width: 98vw;
        }
        .article-image {
          max-width: 98vw;
        }
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <div class="logo" style="padding-left: 32px; margin-bottom: 18px">
        <a
          href="index.html"
          style="
            color: #fff !important;
            font-family: 'Satoshi', Arial, sans-serif !important;
            font-size: 2.1rem;
            font-weight: 500;
            letter-spacing: 2px;
            text-shadow: 0 2px 12px rgba(1, 72, 72, 0.18), 0 1px 0 #014848;
            transition: color 0.2s;
            text-decoration: none;
          "
          >outloud</a
        >
      </div>
      <nav>
        <ul style="padding-left: 0; margin: 0; list-style: none">
          <li
            style="
              margin-bottom: 0;
              border-bottom: none;
              padding: 10px 0 10px 0;
              text-align: left;
              position: relative;
            "
          >
            <a href="index.html" style="padding-left: 32px">Home</a>
          </li>
          <li
            style="
              margin-bottom: 0;
              border-bottom: none;
              padding: 10px 0 10px 0;
              text-align: left;
              position: relative;
            "
          >
            <a href="explore.html" style="padding-left: 32px">Explore</a>
          </li>
          <li
            style="
              margin-bottom: 0;
              border-bottom: none;
              padding: 10px 0 10px 0;
              text-align: left;
              position: relative;
            "
          >
            <a href="progress.html" style="padding-left: 32px">Progress</a>
          </li>
          <li
            style="
              margin-bottom: 0;
              border-bottom: none;
              padding: 10px 0 10px 0;
              text-align: left;
              position: relative;
            "
          >
            <a href="profile.html" style="padding-left: 32px">Profile</a>
          </li>
        </ul>
      </nav>
      <div style="flex: 1"></div>
      <div class="sidebar-bottom">
        <img
          id="sidebarProfilePic"
          src=""
          alt="Profile Picture"
          class="sidebar-avatar"
          style="display: none"
        />
        <svg
          id="sidebarDefaultAvatar"
          width="38"
          height="38"
          viewBox="0 0 72 72"
          fill="none"
          style="display: none"
          class="sidebar-avatar"
        >
          <circle cx="36" cy="36" r="36" fill="#012c2c" />
          <circle cx="36" cy="29" r="13" fill="#fff" />
          <rect x="18" y="48" width="36" height="14" rx="7" fill="#fff" />
        </svg>
        <div class="sidebar-userinfo">
          <span id="sidebarProfileName" class="sidebar-username">User</span>
          <button id="sidebarMenuBtn" class="sidebar-menu-btn">
            <svg
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#fff"
              stroke-width="2.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="5" cy="12" r="1.5" />
              <circle cx="12" cy="12" r="1.5" />
              <circle cx="19" cy="12" r="1.5" />
            </svg>
          </button>
          <div id="sidebarMenuPopup" class="sidebar-menu-popup">
            <button id="sidebarSettingsBtn" class="sidebar-menu-item">
              Settings
            </button>
            <button id="sidebarLogoutBtn" class="sidebar-menu-item">
              Log Out
            </button>
          </div>
        </div>
      </div>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          var sidebarProfilePic = document.getElementById('sidebarProfilePic');
          var sidebarDefaultAvatar = document.getElementById(
            'sidebarDefaultAvatar'
          );
          var sidebarProfileName =
            document.getElementById('sidebarProfileName');
          function setSidebarName(name) {
            sidebarProfileName.textContent = name || 'User';
          }
          var savedPic = localStorage.getItem('profilePic');
          if (savedPic && savedPic !== 'null' && savedPic !== 'undefined') {
            sidebarProfilePic.src = savedPic;
            sidebarProfilePic.style.display = 'block';
            sidebarDefaultAvatar.style.display = 'none';
          } else {
            sidebarProfilePic.style.display = 'none';
            sidebarDefaultAvatar.style.display = 'block';
          }
          var localName = localStorage.getItem('userName') || 'User';
          setSidebarName(localName);
          var sidebarMenuBtn = document.getElementById('sidebarMenuBtn');
          var sidebarMenuPopup = document.getElementById('sidebarMenuPopup');
          if (sidebarMenuBtn && sidebarMenuPopup) {
            sidebarMenuBtn.addEventListener('click', function (e) {
              e.stopPropagation();
              sidebarMenuPopup.style.display =
                sidebarMenuPopup.style.display === 'block' ? 'none' : 'block';
            });
            document.addEventListener('click', function (e) {
              if (
                !sidebarMenuPopup.contains(e.target) &&
                e.target !== sidebarMenuBtn
              ) {
                sidebarMenuPopup.style.display = 'none';
              }
            });
            var sidebarSettingsBtn =
              document.getElementById('sidebarSettingsBtn');
            if (sidebarSettingsBtn) {
              sidebarSettingsBtn.onclick = function () {
                sidebarMenuPopup.style.display = 'none';
                window.location.href = 'settings.html';
              };
            }
            var sidebarLogoutBtn = document.getElementById('sidebarLogoutBtn');
            if (sidebarLogoutBtn) {
              sidebarLogoutBtn.addEventListener('click', function () {
                sidebarMenuPopup.style.display = 'none';
                window.location.href = 'landing.html';
              });
            }
          }
        });
      </script>
      <style>
        .sidebar {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          min-height: 100vh;
          width: 260px;
          background: #012c2c;
          position: relative;
          padding: 32px 24px 0 24px;
          box-sizing: border-box;
        }
        .sidebar nav ul {
          padding-left: 0;
          margin: 0;
          list-style: none;
        }
        .sidebar nav ul li {
          margin-bottom: 0;
          border-bottom: none;
          padding: 10px 0 10px 0;
          text-align: left;
          position: relative;
        }
        .sidebar nav ul li a {
          display: block;
          color: #fff !important;
          font-family: 'Satoshi', Arial, sans-serif !important;
          font-weight: 500;
          letter-spacing: 1px;
          font-size: 1.18rem;
          transition: color 0.2s;
          text-decoration: none;
          text-align: left;
          padding-left: 32px;
        }
        .sidebar nav ul li a:hover {
          color: #b2fefa !important;
        }
        .sidebar-bottom {
          position: fixed;
          left: 0;
          bottom: 0;
          width: 220px;
          display: flex;
          align-items: center;
          padding-bottom: 18px;
          z-index: 20;
          padding-left: 32px;
          background: none;
          box-sizing: border-box;
        }
        .sidebar {
          position: relative;
        }
        .sidebar-avatar {
          width: 38px;
          height: 38px;
          border-radius: 50%;
          object-fit: cover;
          background: #012c2c;
          margin-right: 0;
        }
        .sidebar-userinfo {
          display: flex;
          align-items: center;
          margin-left: 12px;
          width: 100%;
        }
        .sidebar-username {
          color: #fff;
          font-size: 1.08rem;
          font-weight: 600;
          margin-right: 8px;
          display: inline-block;
          line-height: 1.2;
          font-family: 'Satoshi', Arial, sans-serif !important;
        }
        .sidebar-menu-btn {
          margin-left: auto;
          cursor: pointer;
          background: none;
          border: none;
          display: flex;
          align-items: center;
          position: relative;
          padding: 0;
        }
        .sidebar-menu-popup {
          display: none;
          position: absolute;
          right: 0;
          bottom: 32px;
          background: #23272f;
          border-radius: 12px;
          box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.18);
          min-width: 148px;
          z-index: 9999;
          padding: 8px 0;
          border: none;
        }
        .sidebar-menu-item {
          width: 100%;
          background: none;
          border: none;
          color: #fff;
          font-size: 1.08rem;
          font-family: 'Satoshi', Arial, sans-serif !important;
          text-align: left;
          padding: 10px 22px;
          cursor: pointer;
          transition: background 0.18s;
          border-radius: 0;
          outline: none;
          display: flex;
          align-items: center;
          border-bottom: 1px solid #01484844;
        }
        .sidebar-menu-item:last-child {
          border-bottom: none;
        }
        .sidebar-menu-item:hover {
          background: #01484822;
        }
        @media (max-width: 900px) {
          .sidebar {
            width: 70px;
            padding: 24px 8px 0 8px;
          }
          .sidebar-bottom {
            padding-left: 0;
            padding-bottom: 12px;
          }
        }
      </style>
    </aside>
    <main class="article-main">
      <div class="article-container">
        <img
          id="articleImage"
          class="article-image"
          src=""
          alt="Article Image"
          style="display: none"
        />
        <div id="articleCaption" class="article-caption"></div>
        <div id="articleContent" class="article-content"></div>
      </div>
    </main>
    <script>
      // Load article data from localStorage (by index)
      function getQueryParam(name) {
        const url = new URL(window.location.href);
        return url.searchParams.get(name);
      }
      const articleIdx = parseInt(getQueryParam('id'), 10);
      const posts = JSON.parse(localStorage.getItem('newsletters') || '[]');
      if (!isNaN(articleIdx) && posts[posts.length - 1 - articleIdx]) {
        const post = posts[posts.length - 1 - articleIdx];
        if (post.image) {
          document.getElementById('articleImage').src = post.image;
          document.getElementById('articleImage').style.display = 'block';
        }
        document.getElementById('articleCaption').textContent = post.caption;
        document.getElementById('articleContent').innerHTML = post.content;
      } else {
        document.getElementById('articleCaption').textContent =
          'Article not found.';
        document.getElementById('articleContent').textContent = '';
      }
    </script>
  </body>
</html>
